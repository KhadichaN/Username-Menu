System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui","jimu-ui/advanced/resource-selector","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker","jimu-for-builder","jimu-layouts/layout-runtime","jimu-theme","jimu-core/react"],(function(e,t){var n={},o={},a={},i={},l={},r={},s={},u={},d={},c={};return{setters:[function(e){n.APP_FRAME_NAME_IN_BUILDER=e.APP_FRAME_NAME_IN_BUILDER,n.Immutable=e.Immutable,n.LayoutType=e.LayoutType,n.PageType=e.PageType,n.React=e.React,n.ReactRedux=e.ReactRedux,n.css=e.css,n.getAppStore=e.getAppStore,n.hooks=e.hooks,n.jsx=e.jsx,n.polished=e.polished,n.useIntl=e.useIntl},function(e){o.SettingRow=e.SettingRow,o.SettingSection=e.SettingSection},function(e){a.Label=e.Label,a.Radio=e.Radio,a.Select=e.Select,a.Switch=e.Switch,a.defaultMessages=e.defaultMessages,a.styleUtils=e.styleUtils},function(e){i.IconPicker=e.IconPicker},function(e){l.BorderRadiusSetting=e.BorderRadiusSetting,l.InputUnit=e.InputUnit,l.NavStyleSettingByState=e.NavStyleSettingByState,l.TextAlignment=e.TextAlignment},function(e){r.ThemeColorPicker=e.ThemeColorPicker},function(e){s.getAppConfigAction=e.getAppConfigAction},function(e){u.LayoutItemSizeModes=e.LayoutItemSizeModes},function(e){d.useTheme2=e.useTheme2},function(e){c.default=e.default}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=n},972:e=>{"use strict";e.exports=c},108:e=>{"use strict";e.exports=s},496:e=>{"use strict";e.exports=u},888:e=>{"use strict";e.exports=d},321:e=>{"use strict";e.exports=a},809:e=>{"use strict";e.exports=i},298:e=>{"use strict";e.exports=o},562:e=>{"use strict";e.exports=l},337:e=>{"use strict";e.exports=r}},t={};function p(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,p),a.exports}p.d=(e,t)=>{for(var n in t)p.o(t,n)&&!p.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.p="";var g={};return p.p=window.jimuConfig.baseUrl,(()=>{"use strict";p.r(g),p.d(g,{__set_webpack_public_path__:()=>x,default:()=>w});var e,t=p(244),n=p(298);!function(e){e.Icon="ICON",e.Vertical="VERTICAL",e.Horizontal="HORIZONTAL"}(e||(e={}));var o=p(321),a=p(809),i=p(562),l=p(337),r=p(108),s=p(496);const u=n=>{var o,a,i;let l;const u=(0,t.getAppStore)().getState();l=window.jimuConfig.isBuilder?null==u?void 0:u.appStateInBuilder:u;const d=null===(o=null==l?void 0:l.appRuntimeInfo)||void 0===o?void 0:o.selection,c=null===(a=l.appConfig.layouts)||void 0===a?void 0:a[null==d?void 0:d.layoutId],p=null===(i=null==c?void 0:c.content)||void 0===i?void 0:i[null==d?void 0:d.layoutItemId];if(c&&p&&(null==c?void 0:c.type)===t.LayoutType.FixedLayout){const o=n===e.Vertical,a=n===e.Horizontal,{width:i,height:l}=(t=>{switch(t){case e.Icon:return{width:50,height:50};case e.Vertical:return{width:300,height:300};default:return{width:300,height:50}}})(n),u=(e=>{var n;const o=document.querySelector(`iframe[name="${t.APP_FRAME_NAME_IN_BUILDER}"]`);if(o)return(null!==(n=o.contentDocument)&&void 0!==n?n:o.contentWindow.document).querySelector(e);return null})(`div.layout[data-layoutid=${d.layoutId}]`),{clientWidth:c=100,clientHeight:g=100}=u||{},v=100*i/c+"%",m=100*l/g+"%";(0,r.getAppConfigAction)().editLayoutItemProperty(d,"setting.autoProps",{width:a?s.LayoutItemSizeModes.Custom:s.LayoutItemSizeModes.Auto,height:o?s.LayoutItemSizeModes.Custom:s.LayoutItemSizeModes.Auto}).editLayoutItemProperty(d,"bbox",p.bbox.set("width",v).set("height",m)).exec()}},d={subMenuExpandMode:"Username Submenu expand mode",mainMenu:"Username Main menu",subMenu:"Username Submenu"};var c=p(888),v=p(972);function m(e){return{svg:'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="css-1i7frhi jimu-icon"><path d="M2 1a1 1 0 100 2h12a1 1 0 100-2H2zm0-1h12a2 2 0 010 4H2a2 2 0 010-4zm0 7a1 1 0 100 2h12a1 1 0 100-2H2zm0-1h12a2 2 0 010 4H2a2 2 0 010-4zm0 7a1 1 0 100 2h12a1 1 0 100-2H2zm0-1h12a2 2 0 010 4H2a2 2 0 010-4z" fill="currentColor" fill-rule="nonzero"></path></svg>',properties:{color:"var(--ref-palette-neutral-1100)",size:20,inlineSvg:!0,filename:e("menu")}}}function b(e){switch(e){case"anchor":return"left";case"textAlign":return"center";case"showIcon":return!1;case"gap":return"0px";case"submenuMode":return"foldable";default:return null}}const h=(n,o,a)=>v.default.useMemo((()=>function(n=e.Horizontal,o){const a={pageAccess:{}};switch(n){case e.Horizontal:return(0,t.Immutable)(Object.assign(Object.assign({},a),{type:"nav",menuStyle:"default",vertical:!1,advanced:!1,standard:{gap:b("gap"),textAlign:b("textAlign")}}));case e.Vertical:return(0,t.Immutable)(Object.assign(Object.assign({},a),{type:"nav",menuStyle:"default",vertical:!0,advanced:!1,standard:{submenuMode:b("submenuMode"),gap:b("gap"),textAlign:b("textAlign")}}));case e.Icon:return(0,t.Immutable)(Object.assign(Object.assign({},a),{type:"drawer",menuStyle:"default",vertical:!0,advanced:!1,standard:{anchor:b("anchor"),submenuMode:b("submenuMode"),icon:m(o),gap:b("gap"),textAlign:b("textAlign")}}))}}(o,a).merge(n,{deep:!0})),[n,o,a]),f=t.css`
  .radio-container {
    display: flex;
    width: 100%;
    margin-top: 0.5rem;
    > span.jimu-radio {
      flex-shrink: 0;
      margin-top: 0.1rem;
    }
    > label {
      margin-bottom: 0;
    }
  }
`,w=r=>{var s,p,g,w,x;const y=t.hooks.useTranslation(d,o.defaultMessages),j=(0,c.useTheme2)(),{config:S,id:I,onSettingChange:R}=r,A=(M=S,v.default.useMemo((()=>"drawer"===M.type?e.Icon:M.vertical?e.Vertical:e.Horizontal),[M.type,M.vertical]));var M;const C=h(S,A,y),{vertical:z,type:T,menuStyle:k,variant:O,advanced:P,standard:L}=C,{anchor:_,textAlign:N,icon:B,submenuMode:H,gap:U,showIcon:E}=L||{},V=P?null==C?void 0:C.paper:void 0,$=(0,t.useIntl)(),F=t.React.useMemo((()=>{var e;if(!(null===(e=null==B?void 0:B.properties)||void 0===e?void 0:e.filename))return;const t=B.properties.filename;return $.formatMessage({id:t,defaultMessage:d[t]||o.defaultMessages[t]||t})}),[null===(s=null==B?void 0:B.properties)||void 0===s?void 0:s.filename,$]),D=(e,t)=>{R({id:I,config:Array.isArray(e)?S.setIn(e,t):S.set(e,t)})},W=(e,t)=>{var n;if(null==t){if(!(null===(n=null==O?void 0:O.root)||void 0===n?void 0:n[e]))return;const t=S.variant.root.without(e);if(Object.keys(t).length)D(["variant","root"],t);else{const e=S.variant.without("root");Object.keys(e).length?D("variant",e):R({id:I,config:S.without("variant")})}}else D(["variant","root",e],t)},q=(e,n)=>{let o=S.standard||(0,t.Immutable)({});o=n===b(e)?o.without(e):o.set(e,n),R({id:I,config:Object.keys(o).length?S.set("standard",o):S.without("standard")})},Z=t.React.useMemo((()=>{var e,n,a;if(!(null===(e=null==O?void 0:O.root)||void 0===e?void 0:e.borderRadius))return null;const i=t.polished.getValueAndUnit("none"===(null===(n=null==O?void 0:O.root)||void 0===n?void 0:n.borderRadius)?"0px":o.styleUtils.remToPixel((null===(a=null==O?void 0:O.root)||void 0===a?void 0:a.borderRadius)||"0rem"));return(0,t.Immutable)({number:[null==i?void 0:i[0]],unit:null==i?void 0:i[1]})}),[null===(p=null==O?void 0:O.root)||void 0===p?void 0:p.borderRadius]),G=t.ReactRedux.useSelector((e=>{var n,o,a,i,l;const r=(null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appConfig)||e.appConfig,s=null!==(a=null===(o=null==r?void 0:r.pages)||void 0===o?void 0:o.asMutable({deep:!0}))&&void 0!==a?a:{},u=null!==(l=null===(i=null==r?void 0:r.pageStructure)||void 0===i?void 0:i.asMutable({deep:!0}))&&void 0!==l?l:[],d=[];return u.forEach((e=>{const[n,o]=Object.entries(e)[0],a=s[n];(null==a?void 0:a.type)===t.PageType.Normal&&(null==a?void 0:a.isVisible)&&d.push({id:a.id,name:a.label||a.name||a.id}),null==o||o.forEach((e=>{const n=s[e];(null==n?void 0:n.type)===t.PageType.Normal&&(null==n?void 0:n.isVisible)&&d.push({id:n.id,name:n.label||n.name||n.id})}))})),d}));return(0,t.jsx)("div",{css:f,className:"widget-setting-menu jimu-widget-setting"},(0,t.jsx)(n.SettingSection,null,(0,t.jsx)(n.SettingRow,{label:y("type")},(0,t.jsx)(o.Select,{"aria-label":y("type"),size:"sm",value:A,onChange:t=>{const n=t.target.value,o=function(t=e.Horizontal){const n={pageAccess:{}};switch(t){case e.Horizontal:return Object.assign(Object.assign({},n),{type:"nav",vertical:!1});case e.Vertical:return Object.assign(Object.assign({},n),{type:"nav",vertical:!0});case e.Icon:return Object.assign(Object.assign({},n),{type:"drawer"})}}(n);R({id:I,config:o}),u(n)},style:{width:"50%"}},(0,t.jsx)("option",{value:e.Icon},y("icon")),(0,t.jsx)("option",{value:e.Vertical},y("vertical")),(0,t.jsx)("option",{value:e.Horizontal},y("horizontal")))),"drawer"===T&&(0,t.jsx)(n.SettingRow,{label:y("location"),flow:"no-wrap"},(0,t.jsx)(o.Select,{"aria-label":y("location"),size:"sm",style:{width:"50%"},value:_,onChange:e=>{q("anchor",e.target.value)}},(0,t.jsx)("option",{value:"left"},y("left")),(0,t.jsx)("option",{value:"right"},y("right")))),z&&(0,t.jsx)(n.SettingRow,{label:y("subMenuExpandMode"),flow:"wrap"},(0,t.jsx)(o.Select,{"aria-label":y("subMenuExpandMode"),size:"sm",value:H,onChange:e=>{q("submenuMode",e.target.value)}},(0,t.jsx)("option",{value:"foldable"},y("foldable")),(0,t.jsx)("option",{value:"static"},y("expand")))),"drawer"===T&&(0,t.jsx)(t.React.Fragment,null,(0,t.jsx)(n.SettingRow,{label:y("icon"),flow:"no-wrap",role:"group","aria-label":y("icon")},(0,t.jsx)(a.IconPicker,{hideRemove:!0,icon:B,customIcons:[m(y)],customLabel:F,previewOptions:{color:!0,size:!1},onChange:e=>{D(["standard","icon"],e)},setButtonUseColor:!1})),(0,t.jsx)(n.SettingRow,{label:y("iconSize"),flow:"no-wrap"},(0,t.jsx)(i.InputUnit,{"aria-label":y("iconSize"),className:"w-50",value:`${null!==(w=null===(g=null==B?void 0:B.properties)||void 0===g?void 0:g.size)&&void 0!==w?w:0}px`,onChange:e=>{D(["standard","icon","properties","size"],e.distance)}})))),(0,t.jsx)(n.SettingSection,{title:y("appearance"),role:"group","aria-label":y("appearance")},(0,t.jsx)(n.SettingRow,{label:y("style"),flow:"wrap",role:"radiogroup","aria-label":y("style")},[{label:y("default"),value:"default"},{label:y("underline"),value:"underline"},{label:y("pills"),value:"pills"}].map(((e,n)=>(0,t.jsx)("div",{className:"radio-container",key:n},(0,t.jsx)(o.Radio,{id:"nav-style-type"+n,style:{cursor:"pointer"},name:"style-type",onChange:t=>{((e,t)=>{if(!e.currentTarget.checked)return;let n="default"===t?S.without("menuStyle"):S.set("menuStyle",t);n=n.without("advanced").without("variant").without("paper"),R({id:I,config:n})})(t,e.value)},checked:k===e.value}),(0,t.jsx)(o.Label,{style:{cursor:"pointer"},for:"nav-style-type"+n,className:"ml-2 text-break"},e.label))))),(0,t.jsx)(n.SettingRow,{label:y("space"),flow:"no-wrap"},(0,t.jsx)(i.InputUnit,{"aria-label":y("space"),className:"w-50",min:0,value:U,onChange:e=>{q("gap",`${e.distance}${e.unit}`)}})),(0,t.jsx)(n.SettingRow,{flow:"no-wrap",label:y("alignment")},(0,t.jsx)(i.TextAlignment,{"aria-label":y("alignment"),textAlign:N,onChange:e=>{q("textAlign",e)}})),(0,t.jsx)(n.SettingRow,{flow:"no-wrap",tag:"label",label:y("showIcon")},(0,t.jsx)(o.Switch,{checked:E,onChange:(e,t)=>{q("showIcon",t)}}))),(0,t.jsx)(n.SettingSection,null,(0,t.jsx)(n.SettingRow,{flow:"no-wrap",tag:"label",label:y("advance")},(0,t.jsx)(o.Switch,{checked:P,onChange:()=>{let e;e=!(null==C?void 0:C.advanced)?S.set("advanced",!0):S.without("advanced").without("variant").without("paper"),R({id:I,config:e})}})),P&&(0,t.jsx)(t.React.Fragment,null,"drawer"!==T&&(0,t.jsx)(n.SettingRow,{label:y("background"),flow:"no-wrap"},(0,t.jsx)(l.ThemeColorPicker,{"aria-label":y("background"),specificTheme:j,value:null===(x=null==O?void 0:O.root)||void 0===x?void 0:x.bg,onChange:e=>{W("bg",e||null)}})),"drawer"!==T&&(0,t.jsx)(n.SettingRow,{label:y("borderRadius"),flow:"no-wrap"},(0,t.jsx)(i.BorderRadiusSetting,{style:{width:"30%"},separated:!1,value:Z,placeholder:"",onChange:e=>{var t,n;W("borderRadius",(null===(t=e.number)||void 0===t?void 0:t[0])?`${null===(n=e.number)||void 0===n?void 0:n[0]}${null==e?void 0:e.unit}`:null)}})),"drawer"===T&&(0,t.jsx)(n.SettingRow,{label:y("background"),flow:"no-wrap"},(0,t.jsx)(l.ThemeColorPicker,{"aria-label":y("background"),specificTheme:j,value:null==V?void 0:V.bg,onChange:e=>{D(["paper","bg"],e)}})),(0,t.jsx)(i.NavStyleSettingByState,{variant:O,onlyBorderColor:"underline"===k,text:!0,icon:!1,iconInText:E,onChange:(e,t,n)=>{var o;const a=null===(o=null==O?void 0:O.item)||void 0===o?void 0:o[e];null!=n&&""!==n?"border"===t&&a?D(["variant","item",e],a.without("borderLeft").without("borderRight").without("borderTop").without("borderBottom").set(t,n)):t.includes("border")&&"borderRadius"!==t&&a?D(["variant","item",e],a.without("border").set(t,n)):D(["variant","item",e,t],n):null!=(null==a?void 0:a[t])&&D(["variant","item",e],a.without(t))},onWholeVariantChange:e=>{e?D(["variant"],e):R({id:I,config:S.without("variant")})}}))),(0,t.jsx)(n.SettingSection,{title:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f"},G.map((({id:e,name:o})=>{var a;return(0,t.jsx)(n.SettingRow,{key:e,label:o,flow:"wrap"},(0,t.jsx)("input",{className:"jimu-input w-100",type:"text",placeholder:"user1,user2",value:(null===(a=r.config.pageAccess)||void 0===a?void 0:a[e])||"",onChange:t=>{const n=t.currentTarget.value,o=Object.assign(Object.assign({},r.config.pageAccess||{}),{[e]:n});r.onSettingChange({id:r.id,config:r.config.set("pageAccess",o)})}}))}))))};function x(e){p.p=e}})(),g})())}}}));